/*! nightwatch - v1.0.0 - 2016-01-07
* Copyright (c) 2016 ; Licensed  */

!function(){"use strict";angular.module("nightwatch",["ngMaterial","ui.router"])}(),function(){"use strict";function a(a,b,c){function d(){c.html5Mode(!0),b.otherwise("/index"),a.state("index",{url:"/",views:{cluster:{templateUrl:"assets/templates/health.html",resolve:{cluster:e},controller:"HealthCtrl",controllerAs:"healthVM"},nodes:{templateUrl:"assets/templates/health.nodes.html",resolve:{nodes:g},controller:"HealthNodesCtrl",controllerAs:"healthNodesVM"}}}).state("health",{url:"/health",templateUrl:"assets/templates/health.html",resolve:{cluster:e},controller:"HealthCtrl",controllerAs:"healthVM"}).state("health.indices",{url:"/health_indices",templateUrl:"assets/templates/health.indices.html",resolve:{indices:f},controller:"HealthIndicesCtrl",controllerAs:"healthIndicesVM"}).state("health.nodes",{url:"/health_nodes",templateUrl:"assets/templates/health.nodes.html",resolve:{nodes:g},controller:"HealthNodesCtrl",controllerAs:"healthNodesVM"}).state("watch",{url:"/watch","abstract":"true",templateUrl:"assets/templates/watch.html"}).state("watch.percolators",{url:"/percolators",views:{percolator:{templateUrl:"assets/templates/watch.percolators.html",controller:"PercolatorsCtrl",controllerAs:"percolatorsVM"}}}).state("watch.watchers",{"abstract":!0,url:"/watchers",views:{watchers:{templateUrl:"assets/templates/watch.watchers.html",controller:"WatchersCtrl",controllerAs:"watchersVM"}}}).state("watch.watchers.input",{url:"/input",templateUrl:"assets/templates/watchers.input.html",resolve:{inputsData:h,editable:function(){return!0}},controller:"WatcherInputCtrl",controllerAs:"watcherInputVM"}).state("watch.watchers.trigger",{url:"/trigger",templateUrl:"assets/templates/watchers.trigger.html",resolve:{triggersData:i,editable:function(){return!0}},controller:"WatcherTriggerCtrl",controllerAs:"watcherTriggerVM"}).state("watch.watchers.conditions",{url:"/conditions",templateUrl:"assets/templates/watchers.conditions.html",resolve:{conditionsData:j,editable:function(){return!0}},controller:"WatcherConditionsCtrl",controllerAs:"watcherConditionsVM"}).state("watch.watchers.actions",{url:"/actions",templateUrl:"assets/templates/watchers.actions.html","abstract":!0,resolve:{editable:function(){return!0}},controller:"WatcherActionsCtrl",controllerAs:"watcherActionsVM"}).state("watch.watchers.actions.list",{url:"/all",views:{actions:{templateUrl:"assets/templates/watchers.actions.list.html",resolve:{actionsData:k},controller:"WatcherActionsListCtrl",controllerAs:"watcherActionsListVM"}}}).state("watch.watchers.actions.reload",{url:"/reload",views:{actions:{templateUrl:"assets/templates/watchers.actions.list.html",resolve:{actionsData:k},controller:"WatcherActionsListCtrl",controllerAs:"watcherActionsListVM"}}}).state("watch.watchers.summary",{url:"/summary",templateUrl:"assets/templates/watchers.summary.html","abstract":!0,resolve:{watcherSummary:l},controller:"WatcherSummaryCtrl",controllerAs:"watcherSummaryVM"}).state("watch.watchers.summary.pretty",{url:"/pretty",views:{input:{templateUrl:"assets/templates/watchers.input.html",resolve:{inputsData:h,editable:function(){return!1}},controller:"WatcherInputCtrl",controllerAs:"watcherInputVM"},trigger:{templateUrl:"assets/templates/watchers.trigger.html",resolve:{triggersData:i,editable:function(){return!1}},controller:"WatcherTriggerCtrl",controllerAs:"watcherTriggerVM"},condition:{templateUrl:"assets/templates/watchers.conditions.html",resolve:{conditionsData:j,editable:function(){return!1}},controller:"WatcherConditionsCtrl",controllerAs:"watcherConditionsVM"},action:{templateUrl:"assets/templates/watchers.actions.list.html",resolve:{actionsData:k},controller:"WatcherActionsCtrl",controllerAs:"watcherActionsVM"}}}).state("watch.watchers.summary.json",{url:"/json",templateUrl:"assets/templates/watchers/watchers.summary.json.html"}).state("query",{url:"/query",template:"<h5>Query</h5>"}).state("settings",{url:"/settings",template:"<h5>Settings</h5>"})}function e(a){return a.health().then(function(a){return a.data})}function f(a){return a.indicesHealth().then(function(a){return a.data.indices})}function g(a){return a.nodesInfo().then(function(a){return a.data.nodes})}function h(a){return a.getWatchInputs()}function i(a){return a.getWatchTriggers()}function j(a){return a.getWatchConditions()}function k(a){return a.getWatchActions()}function l(a){return a.getWatcherSummary()}d(),e.$inject=["elastic"],f.$inject=["elastic"],g.$inject=["elastic"],h.$inject=["watchers"],i.$inject=["watchers"],k.$inject=["watchers"],j.$inject=["watchers"],l.$inject=["watchers"]}angular.module("nightwatch").config(a),a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}(),function(){"use strict";angular.module("nightwatch").constant("WatchInputType",{SIMPLE:"simple",SEARCH:"search",HTTP:"http",CHAIN:"chain"}).constant("SimpleInputType",{STRING:"str",NUMERIC:"num",OBJECT:"obj"}).constant("SearchInputType",{DFS_QUERY_AND_FETCH:"dfs_query_and_fetch",DFS_QUERY_THEN_FETCH:"dfs_query_then_fetch",QUERY_AND_FETCH:"query_and_fetch",QUERY_THEN_FETCH:"query_then_fetch",SCAN:"scan"}).constant("ExpandWildCards",{ALL:"all",OPEN:"open",CLOSED:"closed",NONE:"none"}).constant("ResponseContentType",{JSON:"json",YAML:"yaml",TEXT:"text"}).constant("ScheduleTriggerTypes",{HOURLY:"hourly",DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly",YEARLY:"yearly",CRON:"cron",INTERVAL:"interval"}).constant("ConditionTypes",{ALWAYS:"always",NEVER:"never",SCRIPT:"script",COMPARE:"compare",ARRAY_COMPARE:"array_compare"}).constant("ScriptConditionTypes",{INLINE:"inline",INDEXED:"id",FILE:"file"}).constant("ScriptLanguages",{GROOVY:"groovy",JAVASCRIPT:"javascript",PYTHON:"python",EXPRESSION:"expression",MUSTACHE:"mustache"}).constant("ComparisonOperators",{EQ:"eq",NOT_EQ:"not_eq",GT:"gt",GTE:"gte",LT:"lt",LTE:"lte"}).constant("ActionTypes",{EMAIL:"email",WEBHOOK:"webhook",INDEX:"index",LOGGING:"logging",HIPCHAT:"hipchat",SLACK:"slack"})}(),function(){"use strict";function a(a,b){function c(a){return f[a]}function d(a){return g[a]}var e=this,f={green:"thumb_up",yellow:"thumbs_up_down",red:"thumb_down"},g={green:"greenyellow",yellow:"yellow",red:"red"};e.cluster=b,e.clusterColor=d,e.clusterIcon=c}angular.module("nightwatch").controller("HealthCtrl",a),a.$inject=["$scope","cluster"]}(),function(){"use strict";function a(a,b){function c(a){return g[a]}function d(a){return h[a]}function e(a){return _.keys(f.indices)[a]}var f=this,g={green:"thumb_up",yellow:"thumbs_up_down",red:"thumb_down"},h={green:"greenyellow",yellow:"yellow",red:"red"};f.indices=b,f.clusterIcon=c,f.clusterColor=d,f.indiceName=e}angular.module("nightwatch").controller("HealthIndicesCtrl",a),a.$inject=["$scope","indices"]}(),function(){"use strict";function a(a,b){var c=this;c.nodes=b}angular.module("nightwatch").controller("HealthNodesCtrl",a),a.$inject=["$scope","nodes"]}(),function(){"use strict";function a(){function a(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter,{event:b})}),b.preventDefault())})}var b={link:a,restrict:"EA"};return b}angular.module("nightwatch").directive("ngEnter",a)}(),function(){"use strict";function a(a){function b(){a.theme("default")}b()}angular.module("nightwatch").config(a),a.$inject=["$mdThemingProvider"]}(),function(){"use strict";function a(a){function b(){c.leftMenuOpen!=c.leftMenuOpen}var c=this;c.leftMenuOpen=!1,c.menu=b}angular.module("nightwatch").controller("NightWatchCtrl",a),a.$inject=["$scope"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){_.isEmpty(i.name)||_.isEmpty(i.query)||c.createPercolator(i.indice,i.name,i.query).success(function(){h({_id:i.name,_source:i.query}),e.showSimple('The percolator with name "'+i.name+'" has been created!')}).error(function(){b.cancel(),e.showSimple('An error occured while creating the percolator with name "'+i.name+'"...')})}function g(){b.cancel()}function h(a){b.hide(a)}var i=this;i.indice=d.indice,i.name=null,i.query=null,i.createPercolator=f,i.cancelForm=g}angular.module("nightwatch").controller("PercolatorCreateCtrl",a),a.$inject=["$scope","$mdDialog","elastic","data","notifications"]}(),function(){"use strict";function a(a,b,c,d){function e(){return c.indiceInfo(g.indice).then(function(a){g.mappings=_.filter(_.keys(a.data[g.indice].mappings),function(a){return".percolator"!==a})})}function f(){b.cancel()}var g=this;g.indice=d.indice,g.percolator=d.percolator,g.document="",g.mappings=null,g.mapping=null,g.loadMappings=e,g.cancelForm=f}angular.module("nightwatch").controller("PercolatorMatchCtrl",a),a.$inject=["$scope","$mdDialog","elastic","data"]}(),function(){"use strict";function a(a,b,c,d){function e(){return c.indicesHealth().then(function(a){m.indices=_.keys(a.data.indices)})}function f(){return c.percolators(m.indice).then(function(a){m.percolators=a.data.hits.hits})}function g(){return!_.isNull(m.percolators)&&m.percolators.length>0}function h(a,e,f){var g=b.confirm().title("Are you sure you want to delete this percolator?").textContent('The percolator named "'+e+'" will be deleted definitively.').ariaLabel("Delete the percolator").targetEvent(a).ok("Yes, delete it").cancel("No, don't do it");b.show(g).then(function(){c.deletePercolator(m.indice,e).success(function(){d.showSimple('The percolator with name "'+e+'" has been deleted!'),m.percolators.splice(f,1)}).error(function(){d.showSimple('An error occured while deleting the percolator with name "'+e+'"...')})})}function i(a,c){b.show({controller:"PercolatorCreateCtrl",controllerAs:"percolatorsCreateVM",templateUrl:"assets/templates/percolator.dialog.html",parent:angular.element(document.body),targetEvent:a,resolve:{data:function(){return{indice:m.indice}}}}).then(function(a){m.percolators.push(a)})}function j(){b.cancel()}function k(a,c,d){b.show({controller:"PercolatorMatchCtrl",controllerAs:"percolatorMatchVM",templateUrl:"assets/templates/percolator.match.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0,resolve:{data:function(){return{indice:m.indice,percolator:d}}}})}function l(a){return a.length>150?a.substring(0,150)+"...":a}var m=this;m.indices=null,m.indice=null,m.percolators=null,m.percolator=null,m.displayPercolators=g,m.loadIndices=e,m.loadPercolators=f,m.deletePercolator=h,m.displayForm=i,m.cancelForm=j,m.matchPercolator=k,m.getSummary=l}angular.module("nightwatch").controller("PercolatorsCtrl",a),a.$inject=["$scope","$mdDialog","elastic","notifications"]}(),function(){"use strict";function a(a){function b(){return a.get("http://localhost:9200/_cluster/health")}function c(){return a.get("http://localhost:9200/_cluster/health?level=indices")}function d(){return a.get("http://localhost:9200/_nodes")}function e(b){return a.get("http://localhost:9200/"+b+"/.percolator/_search")}function f(b,c){return a["delete"]("http://localhost:9200/"+b+"/.percolator/"+c)}function g(b,c,d){return a.put("http://localhost:9200/"+b+"/.percolator/"+c,d)}function h(b){return a.get("http://localhost:9200/"+b)}function i(b,c){return a.put("http://localhost:9200/_watcher/watch/"+b,c)}return{health:b,indicesHealth:c,indiceInfo:h,nodesInfo:d,percolators:e,deletePercolator:f,createPercolator:g,createWatcher:i}}angular.module("nightwatch").factory("elastic",a),a.$inject=["$http"]}(),function(){"use strict";function a(a){function b(b){return a.show(a.simple().textContent(b).position("top right").hideDelay(3e3))}return{showSimple:b}}angular.module("nightwatch").factory("notifications",a),a.$inject=["$mdToast"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(b){L[a.SIMPLE]=b}function m(b){L[a.SEARCH]=b}function n(b){L[a.HTTP]=b}function o(a){L=a}function p(a){M.schedule=a}function q(a){N=a}function r(a,b){O[a]=b}function s(){return L}function t(){return M}function u(){return N}function v(){var a=_.map(_.keys(O),function(a){return{name:a,type:_.keys(O[a])[0],action:O[a]}});return console.log("actions: "+angular.toJson(a)),a}function w(a){return O[a]}function x(){return[a.SIMPLE,a.SEARCH,a.HTTP]}function y(){var a={};return a.input=L,a.trigger=M,a.condition=N,a.actions=O,a}function z(){return[b.STRING,b.NUMERIC,b.OBJECT]}function A(){return[c.DFS_QUERY_AND_FETCH,c.DFS_QUERY_THEN_FETCH,c.QUERY_AND_FETCH,c.QUERY_THEN_FETCH,c.SCAN]}function B(){return[d.ALL,d.OPEN,d.CLOSED,d.NONE]}function C(){return[e.JSON,e.YAML,e.TEXT]}function D(){return[f.HOURLY,f.DAILY,f.WEEKLY,f.MONTHLY,f.YEARLY,f.CRON,f.INTERVAL]}function E(){return[g.ALWAYS,g.NEVER,g.SCRIPT,g.COMPARE,g.ARRAY_COMPARE]}function F(){return[h.INLINE,h.INDEXED,h.FILE]}function G(){return[i.GROOVY,i.JAVASCRIPT,i.PYTHON,i.EXPRESSION,i.MUSTACHE]}function H(){return[j.EQ,j.NOT_EQ,j.GT,j.GTE,j.LT,j.LTE]}function I(){return[k.EMAIL,k.WEBHOOK,k.INDEX,k.LOGGING,k.HIPCHAT,k.SLACK]}function J(a){for(var b=_.keys(O),c=0;c<b.length;c++)O[b[c]]===a&&O.splice(c,1);return u()}function K(a){return _.map(a.trim().split(","),function(a){return a.trim()})}var L={},M={},N={},O={},P={getInputTypes:x,setSimpleWatcherInput:l,setSearchWatcherInput:m,setHttpWatcherInput:n,setWatcherInput:o,setWatcherScheduleTrigger:p,setWatcherCondition:q,addWatcherAction:r,getWatchInputs:s,getWatchTriggers:t,getWatchConditions:u,getWatchActions:v,getWatcherAction:w,getWatcherSummary:y,getSimpleInputTypes:z,getSearchRequestTypes:A,getExpandWildCards:B,getResponseContentTypes:C,getScheduleTriggerTypes:D,getConditionTypes:E,getScriptTypes:F,getScriptLanguages:G,getComparisonOperators:H,getActionTypes:I,deleteAction:J,transformToArray:K};return P}angular.module("nightwatch").factory("watchers",a),a.$inject=["WatchInputType","SimpleInputType","SearchInputType","ExpandWildCards","ResponseContentType","ScheduleTriggerTypes","ConditionTypes","ScriptConditionTypes","ScriptLanguages","ComparisonOperators","ActionTypes"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){c.cancel()}function g(){c.hide({email:h.email})}var h=this;h.name=e.name,h.email=e.action.email||{},h.cancelForm=f,h.updateAction=g}angular.module("nightwatch").controller("WatcherActionsEmailCtrl",a),a.$inject=["$scope","$state","$mdDialog","watchers","data"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){c.cancel()}function g(){_.isEmpty(i.rooms)||(i.hipchat.message.room=i.rooms),c.hide({hipchat:i.hipchat})}function h(){_.isUndefined(i.hipchat.message)||_.isUndefined(i.hipchat.message.room)||(i.rooms=i.hipchat.message.room)}var i=this;i.name=e.name,i.hipchat=e.action.hipchat||{},i.rooms=[],i.cancelForm=f,i.updateAction=g,h()}angular.module("nightwatch").controller("WatcherActionsHipChatCtrl",a),a.$inject=["$scope","$state","$mdDialog","watchers","data"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){c.cancel()}function g(){c.hide({index:h.index})}var h=this;h.name=e.name,h.index=e.action.index||{},h.cancelForm=f,h.updateAction=g}angular.module("nightwatch").controller("WatcherActionsIndexCtrl",a),a.$inject=["$scope","$state","$mdDialog","watchers","data"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){c.cancel()}function g(){c.hide({logging:h.logging})}var h=this;h.name=e.name,h.logging=e.action.logging||{},h.cancelForm=f,h.updateAction=g}angular.module("nightwatch").controller("WatcherActionsLoggingCtrl",a),a.$inject=["$scope","$state","$mdDialog","watchers","data"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){c.cancel()}function g(){_.isEmpty(i.to)||(i.slack.message.to=i.to),c.hide({slack:i.slack})}function h(){_.isUndefined(i.slack.message)||_.isUndefined(i.slack.message.to)||(i.to=i.slack.message.to)}var i=this;i.name=e.name,i.slack=e.action.slack||{},i.to=[],i.cancelForm=f,i.updateAction=g,h()}angular.module("nightwatch").controller("WatcherActionsSlackCtrl",a),a.$inject=["$scope","$state","$mdDialog","watchers","data"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){c.cancel()}function g(){c.hide({webhook:n.webhook})}function h(a,b){if(!_.isEmpty(a)&&!_.isEmpty(b)){var c=n.webhook.headers||{};c[a]=b,n.webhook.headers=c}}function i(a){var b={};angular.forEach(_.keys(n.webhook.headers),function(c){c!==a&&(b[c]=n.webhook.headers[c])}),n.webhook.headers=b}function j(){return _.keys(n.webhook.headers)}function k(a,b){if(!_.isEmpty(a)&&!_.isEmpty(b)){var c=n.webhook.params||{};c[a]=b,n.webhook.params=c}}function l(a){var b={};angular.forEach(_.keys(n.webhook.params),function(c){c!==a&&(b[c]=n.webhook.params[c])}),n.webhook.params=b}function m(){return _.keys(n.webhook.params)}var n=this;n.name=e.name,n.webhook=e.action.webhook||{},n.cancelForm=f,n.updateAction=g,n.addHeader=h,n.removeHeader=i,n.getHeaders=j,n.addParameter=k,n.removeParameter=l,n.getParameters=m}angular.module("nightwatch").controller("WatcherActionsWebhookCtrl",a),a.$inject=["$scope","$state","$mdDialog","watchers","data"]}(),function(){"use strict";function a(a,b,c,d){function e(){b.go("watch.watchers.conditions")}function f(){b.go("watch.watchers.summary.pretty")}function g(a){var e=j(k.type);c.show({controller:e.controller,controllerAs:e.controllerAs,templateUrl:e.templateUrl,parent:angular.element(document.body),targetEvent:event,resolve:{data:function(){return{name:k.name,action:{}}}}}).then(function(a){d.addWatcherAction(k.name,a),b.go("watch.watchers.actions.reload")},function(){b.go("watch.watchers.actions.reload")})}function h(){return d.getWatchActions()}function i(){return d.getActionTypes()}function j(a){var b={email:{controller:"WatcherActionsEmailCtrl",controllerAs:"watcherActionsEmailVM",templateUrl:"assets/templates/actions/watchers.actions.email.html"},webhook:{controller:"WatcherActionsWebhookCtrl",controllerAs:"watcherActionsWebhookVM",templateUrl:"assets/templates/actions/watchers.actions.webhook.html"},index:{controller:"WatcherActionsIndexCtrl",controllerAs:"watcherActionsIndexVM",templateUrl:"assets/templates/actions/watchers.actions.index.html"},logging:{controller:"WatcherActionsLoggingCtrl",controllerAs:"watcherActionsLoggingVM",templateUrl:"assets/templates/actions/watchers.actions.logging.html"},hipchat:{controller:"WatcherActionsHipChatCtrl",controllerAs:"watcherActionsHipChatVM",templateUrl:"assets/templates/actions/watchers.actions.hipchat.html"},slack:{controller:"WatcherActionsSlackCtrl",controllerAs:"watcherActionsSlackVM",templateUrl:"assets/templates/actions/watchers.actions.slack.html"}};return b[a]}var k=this;k.name="",k.type="",k.goToConditions=e,k.goToSummary=f,k.displayCreateForm=g,k.getWatcherActions=h,k.getActionTypes=i}angular.module("nightwatch").controller("WatcherActionsCtrl",a),a.$inject=["$scope","$state","$mdDialog","watchers"]}(),function(){"use strict";function a(a,b,c,d){function e(){var a={};a[d.type]=l[d.type],c.addWatcherAction(l.name,a),b.go("watch.watchers.actions.list")}function f(a,b){if(!_.isEmpty(a)&&!_.isEmpty(b)){var c=l[d.type].headers||{};c[a]=b,l[d.type].headers=c}}function g(a){var b={};angular.forEach(_.keys(l[d.type].headers),function(c){c!==a&&(b[c]=l[d.type].headers[c])}),l[d.type].headers=b}function h(){return _.keys(l[d.type].headers)}function i(a,b){if(!_.isEmpty(a)&&!_.isEmpty(b)){var c=l[d.type].params||{};c[a]=b,l[d.type].params=c}}function j(a){var b={};angular.forEach(_.keys(l[d.type].params),function(c){c!==a&&(b[c]=l[d.type].params[c])}),l[d.type].params=b}function k(){return _.keys(l[d.type].params)}var l=this;l.name=d.name,l.type=d.type,l[d.type]={},l.saveAction=e,l.addHeader=f,l.removeHeader=g,l.getHeaders=h,l.addParameter=i,l.removeParameter=j,l.getParameters=k}angular.module("nightwatch").controller("WatcherActionsCreateCtrl",a),a.$inject=["$scope","$state","watchers","data"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){return!_.isEmpty(l.actions)}function h(a){return m[a]}function i(a,b,e){var f=k(e);c.show({controller:f.controller,controllerAs:f.controllerAs,templateUrl:f.templateUrl,parent:angular.element(document.body),targetEvent:a,resolve:{data:function(){return{name:b,action:d.getWatcherAction(b)}}}}).then(function(a){d.addWatcherAction(b,a)})}function j(a,b){var f=c.confirm().title("Are you sure you want to delete this action?").textContent('The action named "'+b+'" will be deleted definitively.').ariaLabel("Delete the action").targetEvent(a).ok("Yes, delete it").cancel("No, don't do it");c.show(f).then(function(){l.actions=d.deleteAction(b),e.showSimple('The action with name "'+b+'" has been deleted!')})}function k(a){var b={email:{controller:"WatcherActionsEmailCtrl",controllerAs:"watcherActionsEmailVM",templateUrl:"assets/templates/actions/watchers.actions.email.html"},webhook:{controller:"WatcherActionsWebhookCtrl",controllerAs:"watcherActionsWebhookVM",templateUrl:"assets/templates/actions/watchers.actions.webhook.html"},index:{controller:"WatcherActionsIndexCtrl",controllerAs:"watcherActionsIndexVM",templateUrl:"assets/templates/actions/watchers.actions.index.html"},logging:{controller:"WatcherActionsLoggingCtrl",controllerAs:"watcherActionsLoggingVM",templateUrl:"assets/templates/actions/watchers.actions.logging.html"},hipchat:{controller:"WatcherActionsHipChatCtrl",controllerAs:"watcherActionsHipChatVM",templateUrl:"assets/templates/actions/watchers.actions.hipchat.html"},slack:{controller:"WatcherActionsSlackCtrl",controllerAs:"watcherActionsSlackVM",templateUrl:"assets/templates/actions/watchers.actions.slack.html"}};return b[a]}var l=this,m={email:"mail"};l.actions=f,l.hasActions=g,l.actionIcon=h,l.showAction=i,l.deleteAction=j}angular.module("nightwatch").controller("WatcherActionsListCtrl",a),a.$inject=["$scope","$state","$mdDialog","watchers","notifications","actionsData"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){s(),b.go("watch.watchers.trigger")}function i(){s(),b.go("watch.watchers.actions.list")}function j(){return e.getConditionTypes()}function k(){return e.getScriptTypes()}function l(){return e.getScriptLanguages()}function m(){u.condition={},u.condition[u.type]={},u.leftOperand=u.rightOperand=u.rightOperandName=u.operator=""}function n(){u.condition.script={},u.condition.script[u.scriptType]=""}function o(a,b){if(!_.isEmpty(a)&&!_.isEmpty(b)){var c=u.condition.params||{};c[a]=b,u.condition.params=c}}function p(a){var b={};angular.forEach(_.keys(u.condition.params),function(c){c!==a&&(b[c]=u.condition.params[c])}),u.condition.params=b}function q(){return _.keys(u.condition.params)}function r(){return e.getComparisonOperators()}function s(){u.type===c.COMPARE?(u.condition.compare={},u.condition.compare[u.leftOperand]={},u.condition.compare[u.leftOperand][u.operator]=u.rightOperand):u.type===c.ARRAY_COMPARE&&(u.condition={},u.condition.array_compare={},u.condition.array_compare[u.leftOperand]={},u.condition.array_compare[u.leftOperand][u.operator]={},u.condition.array_compare[u.leftOperand][u.operator][u.rightOperandName]=u.rightOperand,_.isNull(u.path)||(u.condition.array_compare[u.leftOperand].path=u.path),_.isNull(u.quantifier)||(u.condition.array_compare[u.leftOperand][u.operator].quantifier=u.quantifier)),e.setWatcherCondition(u.condition)}function t(a){if(!_.isEmpty(_.keys(a)))if(u.condition=a,"script"===u.type)_.isUndefined(a.script.inline)?_.isUndefined(a.script.file)?_.isUndefined(a.script.id)||(u.scriptType="id"):u.scriptType="file":u.scriptType="inline";else if(u.type===c.COMPARE)u.arrayCompare=_.contains(_.keys(u.condition),"array_compare"),_.isEmpty(_.keys(a.compare))||(u.leftOperand=_.keys(a.compare)[0],u.operator=_.keys(_.values(a.compare)[0])[0],u.rightOperand=_.values(_.values(a.compare)[0])[0]);else if(u.type===c.ARRAY_COMPARE&&!_.isEmpty(_.keys(a.array_compare))){if(u.leftOperand=_.keys(a.array_compare)[0],u.operator=_.intersection(_.keys(a.array_compare[u.leftOperand]),u.getComparisonOperators())[0]||null,!_.isNull(u.operator)){var b=a.array_compare[u.leftOperand][u.operator],d=null,e=null,f=null;angular.forEach(_.keys(b),function(a){"quantifier"===a?f=b[a]:(d=a,e=b[a])}),u.rightOperandName=d,u.rightOperand=e,u.quantifier=f}u.path=a.array_compare[u.leftOperand].path}}var u=this;u.type=_.keys(f)[0]||"",u.scriptType="",u.condition={},u.leftOperand="",u.rightOperand="",u.rightOperandName="",u.operator="",u.quantifier=null,u.path=null,u.goToTrigger=h,u.goToActions=i,u.getConditionTypes=j,u.getScriptTypes=k,u.getScriptLanguages=l,u.updateType=m,u.updateScriptType=n,u.addParameter=o,u.removeParameter=p,u.getParameters=q,u.getComparisonOperators=r,u.canBeEdit=g,t(f)}angular.module("nightwatch").controller("WatcherConditionsCtrl",a),a.$inject=["$scope","$state","ConditionTypes","ComparisonOperators","watchers","conditionsData","editable"]}(),function(){"use strict";function a(a,b){}angular.module("nightwatch").controller("WatchersCtrl",a),a.$inject=["$scope","watchers"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){o(),b.go("watch.watchers.trigger")}function h(){return c.getSearchRequestTypes()}function i(){return c.getInputTypes()}function j(){return c.getSimpleInputTypes()}function k(a,b){var d=x.input.simple||{};d[a]="obj"===a?angular.fromJson(b):b,x.input.simple=d,c.setSimpleWatcherInput(x.input)}function l(){return angular.toJson(x.input,!0)}function m(){return c.getExpandWildCards()}function n(){return c.getResponseContentTypes()}function o(){angular.forEach(_.keys(x.chipsData),function(a){if(!_.isEmpty(a)&&x.type===d.SEARCH){var b=x.search.request||{};b[a]=x.chipsData[a],x.search.request=b}}),_.isEmpty(x.extractChipsData)||(x[x.type].extract=x.extractChipsData);var a={};a[x.type]=x[x.type],c.setWatcherInput(a)}function p(a){x[x.type]=a[x.type],x.type===d.SEARCH&&angular.forEach(_.keys(x.chipsData),function(a){_.isUndefined(x.search.request[a])||(x.chipsData[a]=x.search.request[a])}),_.isEmpty(x.type)||_.isUndefined(x[x.type].extract)||(x.extractChipsData=x[x.type].extract)}function q(){x.extractChipsData=[]}function r(a,b){if(!_.isEmpty(a)&&!_.isEmpty(b)){var c=x.http.headers||{};c[a]=b,x.http.headers=c}}function s(a){var b={};angular.forEach(_.keys(x.http.headers),function(c){c!==a&&(b[c]=x.http.headers[c])}),x.http.headers=b}function t(){return _.keys(x.http.headers)}function u(a,b){if(!_.isEmpty(a)&&!_.isEmpty(b)){var c=x.http.params||{};c[a]=b,x.http.params=c}}function v(a){var b={};angular.forEach(_.keys(x.http.params),function(c){c!==a&&(b[c]=x.http.params[c])}),x.http.params=b}function w(){return _.keys(x.http.params)}var x=this;x.input={},x.type=_.keys(e)[0]||"",x.simple=x.search=x.http={},x.chipsData={indices:[],types:[]},x.extractChipsData=[],x.goToTrigger=g,x.getPrettyInput=l,x.getSearchRequestTypes=h,x.getTypes=i,x.getSimpleTypes=j,x.getExpandWildCards=m,x.getResponseTypes=n,x.resetExtractData=q,x.addHeader=r,x.removeHeader=s,x.getHeaders=t,x.addParameter=u,x.removeParameter=v,x.getParameters=w,x.canBeEdit=f,x.addSimpleInputType=k,p(e)}angular.module("nightwatch").controller("WatcherInputCtrl",a),a.$inject=["$scope","$state","watchers","WatchInputType","inputsData","editable"]}(),function(){"use strict";function a(a,b){function c(){b.cancel()}function d(){e.name.trim().length>0&&b.hide(e.name.trim())}var e=this;e.name="",e.cancelForm=c,e.saveWatcher=d}angular.module("nightwatch").controller("WatcherSaveCtrl",a),a.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){b.go("watch.watchers.actions.list")}function h(){c.show({controller:"WatcherSaveCtrl",controllerAs:"watcherSaveVM",templateUrl:"assets/templates/watchers.save.html",parent:angular.element(document.body),targetEvent:event}).then(function(a){d.createWatcher(a,i.definition).success(function(){e.showSimple('The percolator with name "'+a+'" has successfully been created!')}).error(function(b){console.log("Error while creating the watcher with name "+a+": "+b.data||"Request failed"),console.log("Error status: "+b.status),e.showSimple('An error occured while creating the watcher with name "'+a+'"...')})})}var i=this;i.definition=f,i.goToActions=g,i.saveWatcher=h}angular.module("nightwatch").controller("WatcherSummaryCtrl",a),a.$inject=["$scope","$state","$mdDialog","elastic","notifications","watcherSummary"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){s.saveTrigger(),b.go("watch.watchers.input")}function h(){s.saveTrigger(),b.go("watch.watchers.conditions")}function i(){s.type===d.HOURLY?s.schedule.hourly=s.hours:s.type===d.DAILY?s.dailyTimes?s.schedule.daily={at:s.dailyData.times}:s.schedule.daily={at:{hour:s.dailyData.hours,minute:s.dailyData.minutes}}:s.type===d.WEEKLY?s.schedule.weekly=j(s.weeklyData):s.type===d.MONTHLY?s.schedule.monthly=k(s.monthlyData):s.type===d.YEARLY&&(s.schedule.yearly=l(s.yearlyData)),c.setWatcherScheduleTrigger(s.schedule)}function j(a){return s.weeklyTimes?_.map(s.weeklyData.times,function(a){var b=a.split("@");return{on:b[0],at:b[1]}}):{on:a.days,at:a.hours}}function k(a){return s.monthlyTimes?_.map(s.monthlyData.times,function(a){var b=a.split("@");return{on:b[0],at:b[1]}}):{on:a.days,at:a.hours}}function l(a){return s.yearlyTimes?_.map(s.yearlyData.times,function(a){var b=a.split("@");return{"in":b[0].substring(0,b[0].length-2),on:b[0].substring(b[0].length-2),at:b[1]}}):{"in":a.months,on:a.days,at:a.hours}}function m(){return c.getScheduleTriggerTypes()}function n(a){if(!_.isEmpty(_.keys(a))){var b=_.keys(a)[0];b===d.HOURLY?s.hours=a.hourly:b===d.DAILY?o(a.daily.at):b===d.WEEKLY?p(a.weekly):b===d.MONTHLY?q(a.monthly):b===d.YEARLY?r(a.yearly):b===d.INTERVAL&&(s.schedule.interval=a.interval)}}function o(a){s.dailyTimes=_.isArray(a),s.dailyTimes?s.dailyData={times:a,hours:[],minutes:[]}:s.dailyData={times:[],hours:a.hour,minutes:a.minute}}function p(a){s.weeklyTimes=_.isArray(a),s.weeklyTimes?s.weeklyData.times=_.map(a,function(a){return a.on+"@"+a.at}):(s.weeklyData.days=a.on,s.weeklyData.hours=a.at)}function q(a){s.monthlyTimes=_.isArray(a),s.monthlyTimes?s.monthlyData.times=_.map(a,function(a){return a.on+"@"+a.at}):(s.monthlyData.days=a.on,s.monthlyData.hours=a.at)}function r(a){s.yearlyTimes=_.isArray(a),s.yearlyTimes?s.yearlyData.times=_.map(a,function(a){return a["in"]+a.on+"@"+a.at}):(s.yearlyData.months=a["in"],s.yearlyData.days=a.on,s.yearlyData.hours=a.at)}var s=this;s.type=_.keys(e)[0]||"",s.schedule={},s.hours=[],s.dailyData={times:[],hours:[],minutes:[]},s.dailyTimes=s.weeklyTimes=s.monthlyTimes=s.yearlyTimes=!0,s.weeklyData={times:[],days:[],hours:[]},s.monthlyData={times:[],days:[],hours:[]},s.yearlyData={times:[],months:[],days:[],hours:[]},s.goToInput=g,s.goToConditions=h,s.saveTrigger=i,s.canBeEdit=f,s.getTriggerTypes=m,n(e)}angular.module("nightwatch").controller("WatcherTriggerCtrl",a),a.$inject=["$scope","$state","watchers","ScheduleTriggerTypes","triggersData","editable"]}();
//# sourceMappingURL=nightwatch.min.js.map