<md-toolbar md-scroll-shrink>
  <div class="md-toolbar-tools"><span style="text-align: center;" flex="100">Define your watch input(s)</span></div>
</md-toolbar>
<div flex layout-padding>
  <div layout-gt-xs="row" flex="50" ng-show="!watcherInputVM.hasInput()">
    <md-subheader class="md-warn">You have no input defined...</md-subheader>
  </div>
  <div layout-gt-xs="column" flex="100" ng-show="watcherInputVM.hasInput()">
    <md-subheader class="md-primary">Your current watcher input is:</md-subheader>
    <code>{{ watcherInputVM.getPrettyInput() }}</code>
  </div>
  <form name="inputForm">
    <div layout-gt-xs="row" flex="50">
      <md-input-container class="md-block" flex-gt-xs>
        <label>Choose the type of input</label>
        <md-select ng-model="watcherInputVM.type">
          <md-option ng-repeat="type in watcherInputVM.getTypes()" value="{{ type }}">
            {{ type }}
          </md-option>
        </md-select>
      </md-input-container>
    </div>
    <!-- SIMPLE INPUT TYPE -->
    <div layout-gt-xs="row" flex-fill flex="100" flex-layout="start start" ng-show="watcherInputVM.type === 'simple'">
      <md-input-container class="md-block" flex-gt-sm>
        <label>Choose the static data type</label>
        <md-select ng-model="nature">
          <md-option ng-repeat="data in watcherInputVM.getSimpleTypes()" value="{{ data }}">
            {{ data }}
          </md-option>
        </md-select>
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <label ng-show="nature !== 'obj'">Type the value of this simple input</label>
        <label ng-show="nature === 'obj'">Type the JSON of this simple input</label>
        <input ng-model="value" type="text" aria-label="Type the value" />
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <md-button class="md-fab md-accent md-hue-2"
                      aria-label="Add this input"
                      ng-click="watcherInputVM.addSimpleInputType(nature, value);nature='';value='';">
          <md-tooltip md-direction="top">Add it</md-tooltip>
          <md-icon class="material-icons md-primary md-12">add</md-icon>
        </md-button>
      </md-input-container>
    </div>
    <!-- SEARCH INPUT TYPE -->
    <div layout-gt-xs="column" flex-fill flex="70" flex-layout="start start" ng-show="watcherInputVM.type === 'search'">
      <md-input-container class="md-block" flex-gt-sm>
        <label>Type of search request to perform</label>
        <md-select ng-model="request.search_type">
          <md-option ng-repeat="type in watcherInputVM.getSearchRequestTypes()" value="{{ type }}">
            {{ type }}
          </md-option>
        </md-select>
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <label>Indices to search</label>
        <input ng-model="request.indices" type="text" aria-label="The indices to search" />
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <label>Document types to search for</label>
        <input ng-model="request.types" type="text" aria-label="Document types to search for" />
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <label>The body of the request (JSON format)</label>
        <textarea ng-model="request.body" columns="1" md-maxlength="1000" rows="10"></textarea>
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <label>The body of the search template (JSON format)</label>
        <textarea ng-model="request.template" columns="1" md-maxlength="1000" rows="10"></textarea>
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <label>How to expand wildcards</label>
        <md-select ng-model="request.indices_options.expand_wildcards">
          <md-option ng-repeat="type in watcherInputVM.getSearchRequestTypes()" value="{{ type }}">
            {{ type }}
          </md-option>
        </md-select>
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <md-switch ng-model="request.indices_options.ignore_unavailable" aria-label="Ignore unavailable indices">
          Ignore unavailable indices
        </md-switch>
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <md-switch ng-model="request.indices_options.allow_no_indices" aria-label="Ignore unavailable indices">
          Allow a search where a wildcard indices expression results in no concrete indices
        </md-switch>
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <label>Array of JSON keys to extract from the search response</label>
        <input ng-model="extract" type="text" aria-label="Array of JSON keys to extract from the search response" />
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <label>The timeout for waiting for the search api call to return</label>
        <input ng-model="timeout" type="text" aria-label="The timeout for waiting for the search api call to return" />
      </md-input-container>
      <md-input-container class="md-block" flex-gt-sm>
        <div flex-offset="90" flex="10">
          <md-button class="md-fab md-accent md-hue-2"
                        aria-label="Add this input"
                        ng-click="watcherInputVM.addSearchInputType(request, extract, timeout);">
            <md-tooltip md-direction="top">Save this input</md-tooltip>
            <md-icon class="material-icons md-primary md-12">done_all</md-icon>
          </md-button>
        </div>
      </md-input-container>
    </div>
  </form>
    <!-- GO TO NEXT STEP -->
    <div layout-gt-xs="row" flex-inverse>
      <div flex-offset="95"></div>
      <div flex="5">
        <md-button class="md-fab md-primary md-hue-2" aria-label="Next" ng-click="watcherInputVM.goToTrigger()">
          <md-tooltip md-direction="top">Go to Trigger definition</md-tooltip>
          <md-icon class="material-icons md-primary md-48">chevron_right</md-icon>
        </md-button>
      </div>
    </div>
  </div>
</div>
